## 一、有限自动状态机
### (一)思想
- 描述：通过传入数值(二进制则是0或1)，按照目标规律(状态转移公式实现，如状态进1等)输出对应的状态数值
  - 如：状态机存放着一个变量为起点状态。传入0则状态不变，传入1则变量指向下一个状态

### (二)名词解释：
- 状态：通常是由比特值表示，如00、01、10则是三种状态
- 状态机：通过【状态转换公式】限制了输入任意数字只会转换成【状态转换表/“容器”】中指定的状态
  - 状态转换公式：根据【状态需求】推导而出的公式
  - 状态转换表：枚举所有输入数值(通常是0和1)、根据输入数值结合起始状态对应的输出值
  - 抽象概念“容器”：黑盒角度，传入数字，返回状态
- 自动：黑盒视角，传入数值，返回状态，全程自动化，由【状态转换公式】实现
- 有限：状态机内的状态是有限的：比如00、01、10由【状态转换公式】实现，只有三种状态，是有限的

### (三)为什么是有限自动状态机？
##### 例如：希望对N个二进制数中的1进行计数并按m取模，此时1的具体数量只知道是m的倍数余k，可以一个个计数最后再count%3取得结果k，但是%是程序语法，在二进制中是没有这个操作符的。
- 这个问题有着两个需求
  1. 只对1进行计数，对0则忽略
  2. 最后需根据1的数量取得对应余数k，但不能使用%操作符

#### 使用有限自动状态机实现单比特状态：
- 如：取模数m为3，余数k为1
- 状态机状态：00、01、10
- 状态机运转：只能进0或1，进0状态不变，进1指向下一个状态
- 状态转移公式：one = one ^ n & ~two、two = two ^ n & ~one
- 状态转移公式推导过程：

```
 - 使用程序语言来描述过程：两位二进制状态[two one]
 (一) if else描述状态转换过程：

 1. one位的转换：当
(1)原始：
//当two为0，如n==1取反(0变1则two无变化，1变0则two进1(待第二步))
if two == 0:
  //可省略
  if n == 0
    one == one
  if n == 1:
    one = ~one
//当two等1，如n==1则回到状态00，one设为0，two也变0(待第二步)
if two == 1:
    one = 0

(2)引入异或运算
if two == 0:
  //这里引入
  one = one ^ n
if two == 1:
  one = 0

(3)引入与运算和取反符
//~two意味着two==1则one等0，two==0则one==1，换个说法，只有two==0才等于one^n
one = one ^ n & ~two

 2. two位的转换
引入新one为
(1)原始：
if one == 0
  if n == 1
    two = ~two
//可省略，one等于1时two必定为0，因为没有11状态
if one == 1
  two = 0

(2)引入异或
if one == 0:
  two = two ^ n
if one == 1
  two = 0

(3)引入与运算和取反符
two = two ^ n & ~one
```
- 求返回1的数量的取余结果k为1
  1. 所以最后结果【返回one】即可，因为two为0和忽略

## 二、应用
#### 求：一个整数数组中，除某元素出现一次，其余所有元素都出现3次，找出出现一次的整数 q137
- 解读：所有整数的二进制每个比特位都将出现3的倍数次，除了出现一次的整数比特位为3的倍数次+1。
- 重点：模3自动状态机
- 方案：
  1. 对所有整数按位使用模3自动状态机，假设比特位表示为[twoone]
    1. 那么ones即记录所有整数比特位的one位
    2. twos即记录所有整数比特位的two位
    3. 初始化所有比特位[twoone]为00，即ones=0*整数比特位，twos=0*整数比特位
    4. 将所有整数按位执行模3自动状态机转换状态公式
  2. 由于所有出现3次的整数按位都是3的倍数所以都为00，而出现一次的整数按位余1所以是01。即[twoone]返回one即可，又因为是按位所以即为ones

##### 单比特位理解示例(应用时类推到32位比特位)：
```
比如：[5,4,5,5]==>[101,100,101,101]取第一列比特做例子即[1,1,1,1]通过运算得出了01,10,00,01，最后一个即结果为01（符合即4%3=1），以此类推其他两个比特列，得出00,00，最后结果即二进制100转换为十进制即4
```
![有限自动状态机.jpeg](http://note.youdao.com/yws/res/41950/WEBRESOURCE01b836da72f15196f56fd98e423fc546)
![image](http://note.youdao.com/yws/res/41942/C0D9A389C6AA4435801224C7C75935E6)

## 三、拓展
- 模k自动状态机